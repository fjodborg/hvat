//! Auto-generated license information for third-party dependencies.
//!
//! Generated by cargo-about. Do not edit manually.
//! Run: cargo about generate about.hbs > src/licenses.rs

/// Information about a third-party dependency
#[derive(Debug, Clone)]
pub struct DependencyInfo {
    pub name: &'static str,
    pub version: &'static str,
    pub license: &'static str,
    pub repository: Option<&'static str>,
}

/// All third-party dependencies used by this project
pub const DEPENDENCIES: &[DependencyInfo] = &[
{{#each licenses}}
{{#each used_by}}
    DependencyInfo {
        name: "{{crate.name}}",
        version: "{{crate.version}}",
        license: "{{../name}}",
        repository: {{#if crate.repository}}Some("{{crate.repository}}"){{else}}None{{/if}},
    },
{{/each}}
{{/each}}
];

/// Bundled assets that are not Rust crates (fonts, icons, etc.)
/// These are manually maintained since cargo-about only tracks Rust dependencies.
pub const BUNDLED_ASSETS: &[DependencyInfo] = &[
    DependencyInfo {
        name: "Noto Sans",
        version: "2022",
        license: "SIL Open Font License 1.1",
        repository: Some("https://github.com/notofonts/latin-greek-cyrillic"),
    },
];

/// Get a summary of license usage
pub fn license_summary() -> Vec<(&'static str, usize)> {
    let mut counts: std::collections::HashMap<&'static str, usize> = std::collections::HashMap::new();
    for dep in DEPENDENCIES {
        *counts.entry(dep.license).or_insert(0) += 1;
    }
    for asset in BUNDLED_ASSETS {
        *counts.entry(asset.license).or_insert(0) += 1;
    }
    let mut result: Vec<_> = counts.into_iter().collect();
    result.sort_by(|a, b| b.1.cmp(&a.1));
    result
}
